# æ¡†æ¶ä¸€è‡´æ€§æ£€æŸ¥

> æœ¬æ–‡æ¡£éªŒè¯æ‰€æœ‰æ¡†æ¶è®¾è®¡ä¹‹é—´çš„ä¸€è‡´æ€§
> åˆ›å»ºæ—¶é—´ï¼š2025-11-15

---

## ğŸ“š æ¡†æ¶æ–‡æ¡£æ¸…å•

1. **event.md** - äº‹ä»¶ç³»ç»Ÿæ¡†æ¶
2. **distribution.md** - å¹´é¾„æ®µ-äº‹ä»¶åˆ†å¸ƒæ¡†æ¶
3. **randomness-v2.md** - éšæœºç³»ç»Ÿæ¡†æ¶V2

---

## âœ… ä¸€è‡´æ€§éªŒè¯

### éªŒè¯ç‚¹1ï¼šæ—ç™½äº‹ä»¶è§¦å‘æ¦‚ç‡

**event.md**ï¼š
- æœªæ˜ç¡®æŒ‡å®šå…·ä½“æ¦‚ç‡
- æåˆ°"ä½¿ç”¨ GameConfig.getNarrativeChance()"

**distribution.md**ï¼š
- æ˜ç¡®æŒ‡å®šå¹³å‡20%æ¦‚ç‡
- è¯¦ç»†åˆ—å‡ºå„å¹´é¾„æ®µæ¦‚ç‡ï¼ˆbaby: 25%, child: 15%, teen: 10%, young: 15%, middle: 20%, elder: 25%ï¼‰

**randomness-v2.md**ï¼š
- å®Œå…¨ä¸€è‡´
- baby: 25%, child: 15%, teen: 10%, young: 15%, middle: 20%, elder: 25%

**ç»“è®º**ï¼šâœ… ä¸€è‡´

---

### éªŒè¯ç‚¹2ï¼šåè½¬äº‹ä»¶è§¦å‘æ¦‚ç‡

**event.md**ï¼š
- æ˜ç¡®æŒ‡å®š15%æ¦‚ç‡
- ç¤ºä¾‹ä»£ç ä¸­ä½¿ç”¨ `reversal.chance: 0.15`

**distribution.md**ï¼š
- æ˜ç¡®15%æ¦‚ç‡
- è®¡ç®—ç¤ºä¾‹ä½¿ç”¨15%

**randomness-v2.md**ï¼š
- å®Œå…¨ä¸€è‡´
- reversalChance: 0.15ï¼ˆ15%ï¼‰

**ç»“è®º**ï¼šâœ… ä¸€è‡´

---

### éªŒè¯ç‚¹3ï¼šå±æ€§åˆå§‹å€¼èŒƒå›´

**event.md**ï¼š
- æ˜ç¡®æŒ‡å®š 5-15
- config.js é…ç½®ï¼š`{ min: 5, max: 15 }`

**distribution.md**ï¼š
- æœªæ¶‰åŠï¼ˆä¸åœ¨è¯¥æ¡†æ¶èŒƒå›´å†…ï¼‰

**randomness-v2.md**ï¼š
- æœªæ˜ç¡®æŒ‡å®šï¼Œä½†æåˆ°"ä½åˆå§‹å€¼"
- å±æ€§å½±å“è®¡ç®—ä¸­ä½¿ç”¨åŸºå‡†å€¼30ï¼ˆéœ€è¦è¯´æ˜ï¼‰

**æ½œåœ¨é—®é¢˜**ï¼š
- randomness-v2.md ä¸­è®¡ç®—å±æ€§å½±å“æ—¶ä½¿ç”¨äº† `character.charm - 30` ä½œä¸ºåŸºå‡†
- ä½†å±æ€§åˆå§‹å€¼æ˜¯ 5-15ï¼ŒåŸºå‡†åº”è¯¥æ˜¯10è€Œä¸æ˜¯30

**è§£å†³æ–¹æ¡ˆ**ï¼š
```javascript
// ä¿®æ­£åçš„è®¡ç®—
const charmBonus = (character.charm - 10) / 90 * 0.3;  // åŸºå‡†æ”¹ä¸º10ï¼ŒèŒƒå›´0-100
```

**ç»“è®º**ï¼šâš ï¸ éœ€è¦ä¿®æ­£ randomness-v2.md ä¸­çš„åŸºå‡†å€¼

---

### éªŒè¯ç‚¹4ï¼šå±æ€§å˜åŒ–èŒƒå›´

**event.md**ï¼š
- æ˜ç¡®æŒ‡å®š Â±10-20
- ç¤ºä¾‹ï¼š`attributes: { health: +15 }`

**distribution.md**ï¼š
- æœªæ¶‰åŠï¼ˆä¸åœ¨è¯¥æ¡†æ¶èŒƒå›´å†…ï¼‰

**randomness-v2.md**ï¼š
- ç¤ºä¾‹ä¸­ä½¿ç”¨ Â±15ã€Â±20
- æ­»äº¡æƒ©ç½šä½¿ç”¨ -5 ~ -20

**ç»“è®º**ï¼šâœ… ä¸€è‡´

---

### éªŒè¯ç‚¹5ï¼šå¹´é¾„æ®µåˆ’åˆ†

**event.md**ï¼š
- æœªæ˜ç¡®åˆ—å‡º
- ç¤ºä¾‹ä¸­ä½¿ç”¨ "teen", "young" ç­‰æ ‡è¯†

**distribution.md**ï¼š
- æ˜ç¡®åˆ’åˆ†ï¼š
  - baby: 0-6å²
  - child: 7-12å²
  - teen: 13-18å²
  - young: 19-35å²
  - middle: 36-50å²
  - elder: 51-100å²

**randomness-v2.md**ï¼š
- å®Œå…¨ä¸€è‡´ï¼ˆä½¿ç”¨ç›¸åŒå¹´é¾„æ®µï¼‰

**ç»“è®º**ï¼šâœ… ä¸€è‡´

---

### éªŒè¯ç‚¹6ï¼šç›®æ ‡é€‰æ‹©æ¬¡æ•°

**event.md**ï¼š
- æåˆ°"ç›®æ ‡æ¸¸æˆæ—¶é•¿ï¼š3-5åˆ†é’Ÿï¼ˆ16-22ä¸ªé€‰æ‹©ï¼‰"

**distribution.md**ï¼š
- æ˜ç¡®ç›®æ ‡ï¼š19æ¬¡é€‰æ‹©ï¼ˆ16-22èŒƒå›´å†…ï¼‰
- è¯¦ç»†åˆ†é…åˆ°å„å¹´é¾„æ®µ

**randomness-v2.md**ï¼š
- ä½¿ç”¨19æ¬¡é€‰æ‹©è¿›è¡Œæ¦‚ç‡è®¡ç®—

**ç»“è®º**ï¼šâœ… ä¸€è‡´

---

### éªŒè¯ç‚¹7ï¼šæ­»äº¡æ¦‚ç‡è®¾è®¡

**event.md**ï¼š
- ä¸‰ä¸ªæ­»äº¡ç‚¹ï¼šæ—ç™½ã€å¤±è´¥ã€åè½¬
- æœªæŒ‡å®šå…·ä½“æ¦‚ç‡èŒƒå›´

**distribution.md**ï¼š
- æœªæ¶‰åŠï¼ˆä¸åœ¨è¯¥æ¡†æ¶èŒƒå›´å†…ï¼‰

**randomness-v2.md**ï¼š
- æ˜ç¡®ä¸‰ä¸ªæ­»äº¡ç‚¹çš„æ¦‚ç‡èŒƒå›´ï¼š
  - æ—ç™½æ­»äº¡ï¼š0-10%
  - å¤±è´¥æ­»äº¡ï¼š5-20%
  - åè½¬æ­»äº¡ï¼š5-15%
- è¿›è¡Œäº†æ­»äº¡æ¦‚ç‡æ•°å­¦éªŒè¯

**ç»“è®º**ï¼šâœ… ä¸€è‡´ä¸”è¡¥å……å®Œå–„

---

### éªŒè¯ç‚¹8ï¼šäº‹ä»¶æƒé‡è®¾è®¡

**event.md**ï¼š
- æåˆ°äº‹ä»¶æƒé‡æ¦‚å¿µ
- é«˜å¸å¼•åŠ›æƒé‡æ›´é«˜

**distribution.md**ï¼š
- æ˜ç¡®æŒ‡å®šåŸºç¡€æƒé‡ï¼š
  - high: 10
  - medium: 5
  - low: 2
- æä¾›åŠ¨æ€è°ƒæ•´ç­–ç•¥

**randomness-v2.md**ï¼š
- ä½¿ç”¨åŠ æƒéšæœºé€‰æ‹©
- ä¸ distribution.md ä¸€è‡´

**ç»“è®º**ï¼šâœ… ä¸€è‡´

---

### éªŒè¯ç‚¹9ï¼šå±æ€§å½±å“ç¨‹åº¦

**event.md**ï¼š
- æ˜ç¡®åŸåˆ™ï¼š"ä¸èƒ½æ²¡æœ‰å½±å“ï¼Œä¹Ÿä¸èƒ½å½±å“å¤ªé«˜"
- æä¾›ä¸‰ç§å½±å“æ–¹å¼ï¼ˆè§¦å‘æ¡ä»¶ã€æˆåŠŸç‡ã€æƒé‡ï¼‰

**distribution.md**ï¼š
- æœªæ¶‰åŠï¼ˆä¸åœ¨è¯¥æ¡†æ¶èŒƒå›´å†…ï¼‰

**randomness-v2.md**ï¼š
- æ˜ç¡®å½±å“ç¨‹åº¦ï¼š10-30%
- æ¨èä½¿ç”¨è§¦å‘æ¡ä»¶å’Œæƒé‡å½±å“
- è°¨æ…ä½¿ç”¨æˆåŠŸç‡å½±å“

**ç»“è®º**ï¼šâœ… ä¸€è‡´

---

### éªŒè¯ç‚¹10ï¼šäº‹ä»¶å»é‡è§„åˆ™

**event.md**ï¼š
- æåˆ°"æœ€è¿‘3ä¸ªäº‹ä»¶ä¸é‡å¤"

**distribution.md**ï¼š
- æ˜ç¡®æŒ‡å®šï¼š
  - é€‰æ‹©äº‹ä»¶ï¼šæœ€è¿‘5ä¸ªä¸é‡å¤
  - æ—ç™½äº‹ä»¶ï¼šæœ€è¿‘7ä¸ªä¸é‡å¤

**randomness-v2.md**ï¼š
- æœªæ˜ç¡®æŒ‡å®šæ•°å­—

**å†²çª**ï¼š
- event.md è¯´3ä¸ª
- distribution.md è¯´5ä¸ªï¼ˆé€‰æ‹©ï¼‰å’Œ7ä¸ªï¼ˆæ—ç™½ï¼‰

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä»¥ distribution.md ä¸ºå‡†ï¼ˆæ›´è¯¦ç»†ï¼‰
- é€‰æ‹©äº‹ä»¶ï¼š5ä¸ªå»é‡çª—å£
- æ—ç™½äº‹ä»¶ï¼š7ä¸ªå»é‡çª—å£
- éœ€è¦æ›´æ–° event.md

**ç»“è®º**ï¼šâš ï¸ éœ€è¦ç»Ÿä¸€ä¸º 5/7

---

## ğŸ”§ éœ€è¦ä¿®æ­£çš„é—®é¢˜

### é—®é¢˜1ï¼šå±æ€§å½±å“è®¡ç®—çš„åŸºå‡†å€¼

**ä½ç½®**ï¼šrandomness-v2.md

**å½“å‰**ï¼š
```javascript
const charmBonus = (character.charm - 30) / 100 * 0.2;
```

**ä¿®æ­£ä¸º**ï¼š
```javascript
const charmBonus = (character.charm - 10) / 90 * 0.3;
// åŸºå‡†æ”¹ä¸º10ï¼ˆåˆå§‹å€¼ä¸­ä½æ•°ï¼‰
// èŒƒå›´æ”¹ä¸º90ï¼ˆä»10åˆ°100ï¼‰
// å½±å“æ”¹ä¸º30%ï¼ˆç¬¦åˆ10-30%çš„è®¾è®¡ï¼‰
```

---

### é—®é¢˜2ï¼šäº‹ä»¶å»é‡è§„åˆ™ä¸ä¸€è‡´

**ä½ç½®**ï¼ševent.md

**å½“å‰**ï¼š
- "æœ€è¿‘3ä¸ªäº‹ä»¶ä¸é‡å¤"

**ä¿®æ­£ä¸º**ï¼š
- "é€‰æ‹©äº‹ä»¶ï¼šæœ€è¿‘5ä¸ªä¸é‡å¤"
- "æ—ç™½äº‹ä»¶ï¼šæœ€è¿‘7ä¸ªä¸é‡å¤"

---

## ğŸ“Š æ¡†æ¶è¦†ç›–åº¦æ£€æŸ¥

### å·²è¦†ç›–çš„è®¾è®¡ç‚¹ âœ…

- [x] äº‹ä»¶ç±»å‹å®šä¹‰ï¼ˆæ—ç™½/é€‰æ‹©/åè½¬ï¼‰
- [x] å¹´é¾„æ®µåˆ’åˆ†
- [x] å¹´é¾„è·³è·ƒè§„åˆ™ï¼ˆåœ¨ config.js ä¸­ï¼‰
- [x] æ—ç™½è§¦å‘æ¦‚ç‡
- [x] åè½¬è§¦å‘æ¦‚ç‡
- [x] æ­»äº¡æœºåˆ¶
- [x] å±æ€§ç³»ç»Ÿ
- [x] äº‹ä»¶æƒé‡
- [x] äº‹ä»¶åˆ†å¸ƒç­–ç•¥
- [x] éšæœºæ€§è®¾è®¡
- [x] äº‹ä»¶å»é‡
- [x] æ–‡æ¡ˆé£æ ¼æŒ‡å¯¼

### æœªè¦†ç›–çš„è®¾è®¡ç‚¹ âš ï¸

- [ ] UI/äº¤äº’æ¡†æ¶ï¼ˆå¯é€‰ï¼‰
- [ ] æ•°æ®åŸ‹ç‚¹æ¡†æ¶ï¼ˆå¯é€‰ï¼‰
- [ ] æ’è¡Œæ¦œç³»ç»Ÿï¼ˆå·²åœ¨ game.js ä¸­å®ç°ï¼‰
- [ ] éŸ³æ•ˆ/éŸ³ä¹ï¼ˆæœªè®¡åˆ’ï¼‰

---

## ğŸ¯ config.js éœ€è¦çš„å®Œæ•´é…ç½®

åŸºäºä¸‰ä¸ªæ¡†æ¶çš„éªŒè¯ï¼Œconfig.js éœ€è¦åŒ…å«ï¼š

```javascript
const GameConfig = {
  version: 'v2.0',

  // å¹´é¾„æ®µå®šä¹‰
  ageGroups: {
    baby: { min: 0, max: 6 },
    child: { min: 7, max: 12 },
    teen: { min: 13, max: 18 },
    young: { min: 19, max: 35 },
    middle: { min: 36, max: 50 },
    elder: { min: 51, max: 100 }
  },

  // å¹´é¾„è·³è·ƒè§„åˆ™
  ageJumpRules: {
    baby: { minJump: 5, maxJump: 8 },
    child: { minJump: 3, maxJump: 5 },
    teen: { minJump: 1, maxJump: 2 },
    young: { minJump: 1, maxJump: 3 },
    middle: { minJump: 3, maxJump: 5 },
    elder: { minJump: 5, maxJump: 10 }
  },

  // è§’è‰²åˆå§‹å±æ€§ï¼ˆ5-15ï¼‰
  characterStats: {
    health: { min: 5, max: 15 },
    intelligence: { min: 5, max: 15 },
    luck: { min: 5, max: 15 },
    charm: { min: 5, max: 15 }
  },

  // æ—ç™½äº‹ä»¶è§¦å‘æ¦‚ç‡ï¼ˆå¹³å‡20%ï¼‰
  narrativeChance: {
    baby: 0.25,
    child: 0.15,
    teen: 0.10,
    young: 0.15,
    middle: 0.20,
    elder: 0.25
  },

  // åè½¬äº‹ä»¶è§¦å‘æ¦‚ç‡
  reversalChance: 0.15,

  // äº‹ä»¶æƒé‡ï¼ˆåŸºäºå¸å¼•åŠ›ï¼‰
  attractivenessWeight: {
    high: 10,
    medium: 5,
    low: 2
  },

  // å†…å®¹åˆ†ç±»æƒé‡ï¼ˆæŒ‰å¹´é¾„æ®µåŠ¨æ€è°ƒæ•´ï¼‰
  categoryWeightByAge: {
    teen: {
      love: 2.0,
      school: 1.5,
      career: 0.3
    },
    young: {
      love: 1.3,
      career: 1.8,
      money: 1.5
    },
    middle: {
      family: 1.8,
      career: 1.3,
      money: 1.2
    }
  },

  // äº‹ä»¶å»é‡çª—å£
  deduplication: {
    choiceEvents: 5,      // é€‰æ‹©äº‹ä»¶å»é‡
    narrativeEvents: 7    // æ—ç™½äº‹ä»¶å»é‡
  },

  // å±æ€§å½±å“ç³»ç»Ÿ
  attributeInfluence: {
    enabled: true,
    maxBonus: 0.30,       // æœ€å¤§å½±å“Â±30%
    mapping: {
      love: 'charm',
      career: 'intelligence',
      money: 'luck',
      family: 'charm'
    }
  }
};
```

---

## âœ… ä¸€è‡´æ€§æ£€æŸ¥ç»“è®º

### æ€»ä½“è¯„ä¼°

**é«˜åº¦ä¸€è‡´** - ä¸‰ä¸ªæ¡†æ¶ä¹‹é—´çš„è®¾è®¡é«˜åº¦ç»Ÿä¸€

### éœ€è¦ä¿®æ­£çš„é—®é¢˜ï¼ˆ2ä¸ªï¼‰

1. âš ï¸ randomness-v2.md ä¸­å±æ€§å½±å“è®¡ç®—çš„åŸºå‡†å€¼éœ€è¦ä¿®æ­£
2. âš ï¸ event.md ä¸­äº‹ä»¶å»é‡è§„åˆ™éœ€è¦æ›´æ–°ä¸º 5/7

### å»ºè®®

1. ç«‹å³ä¿®æ­£ä¸Šè¿°ä¸¤ä¸ªé—®é¢˜
2. æ›´æ–° config.js ä»¥åŒ…å«æ‰€æœ‰å¿…è¦é…ç½®
3. å‡†å¤‡å¼€å§‹ä»£ç å®ç°

---

## ğŸ“ ä¿®æ­£æ¸…å•

- [ ] ä¿®æ­£ randomness-v2.md ä¸­çš„å±æ€§å½±å“åŸºå‡†å€¼
- [ ] æ›´æ–° event.md ä¸­çš„å»é‡è§„åˆ™
- [ ] æ›´æ–° config.js æ·»åŠ æ–°é…ç½®
- [ ] æ›´æ–°å·¥ä½œæ—¥å¿—è®°å½•ä¸€è‡´æ€§æ£€æŸ¥ç»“æœ
