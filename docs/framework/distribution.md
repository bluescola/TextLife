# 年龄段-事件分布框架

> 本文档记录游戏中事件在各年龄段的分布策略
> 创建时间：2025-11-15
> 最后更新：2025-11-15

---

## 📋 设计目标

### 核心原则
1. **70%内容集中在13-35岁** - 对应目标用户18-35岁
2. **高吸引力内容优先** - 恋爱/职场/暴富类事件权重更高
3. **快速跳过低吸引力阶段** - 婴幼儿和老年期快速带过
4. **保证玩家体验多样性** - 确保每个年龄段都有代表性事件

### 游戏节奏目标
- **总游戏时长**：3-5 分钟
- **总选择次数**：16-22 次（目标19次）
- **旁白事件**：约 4 次（20%概率）
- **选择事件**：约 15 次（80%概率）
- **反转事件**：约 1-2 次（成功后15%概率）

---

## 📊 年龄段事件数量分配

### 基于抖音用户画像的分配策略

| 年龄段 | 年龄范围 | 目标问题数 | 旁白概率 | 年龄跳跃 | 优先级 | 核心内容 |
|--------|----------|-----------|---------|---------|--------|----------|
| **婴幼儿** | 0-6岁 | 1个 | 25% | 5-8岁 | ⚠️ 低 | 快速跳过 |
| **儿童** | 7-12岁 | 1-2个 | 15% | 3-5岁 | ⭐ 中低 | 学校、游戏 |
| **青少年** | 13-18岁 | 4-5个 | 10% | 1-2岁 | ⭐⭐⭐ 高 | 初恋、校园、叛逆 |
| **青年** | 19-35岁 | 6-8个 | 15% | 1-3岁 | ⭐⭐⭐ 最高 | 恋爱、职场、暴富 |
| **中年** | 36-50岁 | 3-4个 | 20% | 3-5岁 | ⭐⭐ 中高 | 中年危机、家庭 |
| **老年** | 51-100岁 | 1-2个 | 25% | 5-10岁 | ⚠️ 低 | 快速收尾 |

**总计**：16-22次选择 ✅

---

## 🎯 事件内容分布策略

### 1. 高吸引力内容（恋爱/职场/暴富）

**目标**：占总事件的 60-70%

**年龄段分布**：

**青少年期（13-18岁）- 初体验阶段**
```
恋爱类事件（占50%）：
- 校园暗恋（初恋）
- 情书告白
- 青涩约会
- 失恋心碎

校园/学业类（占30%）：
- 考试选择
- 社团活动
- 同学关系
- 升学压力

其他（占20%）：
- 叛逆期冲突
- 兴趣爱好
- 零花钱管理
```

**青年期（19-35岁）- 核心阶段** ⭐⭐⭐
```
恋爱类事件（占30%）：
- 大学恋爱/职场恋爱
- 相亲
- 求婚/结婚
- 感情纠葛

职场类事件（占40%）：
- 求职面试
- 职场选择（跳槽/升职）
- 加班/内卷
- 职场关系（同事/领导）
- 创业机会

暴富类事件（占20%）：
- 投资机会（股票/基金/币圈）
- 创业机会
- 中彩票/意外之财
- 风险投资

其他（占10%）：
- 买房/租房
- 朋友聚会
- 健康问题
```

**中年期（36-50岁）- 深度阶段**
```
家庭类事件（占40%）：
- 子女教育
- 婚姻危机
- 父母养老
- 家庭矛盾

职场类事件（占30%）：
- 中年职场危机
- 事业瓶颈
- 被裁员
- 转行

财富类事件（占20%）：
- 投资/理财
- 房贷压力
- 养老规划

其他（占10%）：
- 健康危机
- 中年兴趣
```

---

### 2. 中等吸引力内容（友情/学业/家庭）

**目标**：占总事件的 20-30%

**分布**：
- 儿童期：学校、友情、游戏
- 青少年期：同学关系、考试
- 青年期：朋友聚会、人际关系
- 中年期：家庭、亲情

---

### 3. 低吸引力内容（婴儿期日常/老年期平淡）

**目标**：占总事件的 5-10%

**策略**：
- 婴儿期：快速跳过（1个问题）
- 老年期：快速收尾（1-2个问题）
- 用旁白事件替代选择事件（减少玩家操作）

---

## 📈 事件权重计算规则

### 权重基础值（基于吸引力）

```javascript
// config.js 中的权重配置
attractivenessWeight: {
  high: 10,      // 高吸引力（恋爱/职场/暴富）
  medium: 5,     // 中等吸引力（友情/学业/家庭）
  low: 2         // 低吸引力（日常琐事）
}
```

### 动态权重调整（可选实现）

**方式1：基于年龄段调整**
```javascript
// 青年期：高吸引力事件权重 × 1.5
if (ageGroup === 'young' && event.attractiveness === 'high') {
  weight *= 1.5;
}

// 婴儿期：降低所有事件权重（用旁白替代）
if (ageGroup === 'baby') {
  weight *= 0.5;
}
```

**方式2：基于内容分类调整**
```javascript
// 青少年期：恋爱类事件权重 × 2
if (ageGroup === 'teen' && event.category === 'love') {
  weight *= 2;
}

// 青年期：职场类事件权重 × 1.8
if (ageGroup === 'young' && event.category === 'career') {
  weight *= 1.8;
}
```

**方式3：基于玩家属性调整**
```javascript
// 高魅力的人更容易遇到恋爱事件
if (event.category === 'love' && character.charm > 50) {
  weight *= 1.3;
}

// 高智力的人更容易遇到职场机会
if (event.category === 'career' && character.intelligence > 50) {
  weight *= 1.3;
}
```

---

## 🎲 事件触发概率调整

### 旁白事件概率（已调整）

基于用户反馈，调整旁白事件触发概率以达到：
**20次选择 × 20% = 4次旁白**

```javascript
// config.js 更新后的配置
narrativeChance: {
  baby: 0.25,    // 25% - 婴儿期多用旁白快速跳过
  child: 0.15,   // 15%
  teen: 0.10,    // 10% - 青少年期减少旁白，增加选择
  young: 0.15,   // 15% - 核心年龄段也要有旁白丰富度
  middle: 0.20,  // 20%
  elder: 0.25    // 25% - 老年期多用旁白快速收尾
}

// 平均概率：约 18-20%
// 结果：20次选择 × 20% ≈ 4次旁白 ✅
```

### 反转事件概率（保持不变）

```javascript
reversalChance: 0.15  // 15%

// 预期结果：
// 16次选择事件 × 60%成功率 = 9.6次成功
// 9.6次成功 × 15% = 1.4次反转
// 约 1-2 次反转 ✅
```

---

## 📝 事件数据需求清单

### 最小可行事件数量（MVP）

**旁白事件**：
- 婴幼儿期：3-5 个
- 儿童期：3-5 个
- 青少年期：5-8 个（重点）
- 青年期：8-12 个（重点）
- 中年期：5-8 个
- 老年期：3-5 个
- **总计**：27-43 个旁白事件

**选择事件**：
- 婴幼儿期：2-3 个
- 儿童期：5-8 个
- 青少年期：15-20 个（重点：恋爱/校园）
- 青年期：30-40 个（重点：恋爱/职场/暴富）
- 中年期：15-20 个
- 老年期：5-8 个
- **总计**：72-99 个选择事件

**总计**：约 100-150 个事件（MVP版本）

---

### 完整版事件数量（目标）

**旁白事件**：50-80 个
**选择事件**：150-200 个
**总计**：200-280 个事件

---

## 🎯 事件去重策略

### 去重规则

```javascript
// 最近出现过的事件不重复
recentEvents: [],           // 记录最近5个选择事件
recentNarratives: [],       // 记录最近7个旁白事件

// 筛选事件时排除最近出现过的
function filterEvents(events) {
  return events.filter(event => {
    if (event.type === 'narrative') {
      return !this.recentNarratives.includes(event.id);
    } else {
      return !this.recentEvents.includes(event.id);
    }
  });
}
```

### 为什么旁白去重更多？

- 旁白事件无选择，重复感更强
- 选择事件有多个选项，即使同一事件也有不同体验
- 旁白事件数量较少，需要更长的去重窗口

---

## 📊 事件分布验证

### 示例游戏流程（19次选择）

```
年龄段          选择次数    旁白次数    总计    占比
────────────────────────────────────────────────
婴幼儿 (0-6)      0          1          1      5%
儿童 (7-12)       1          1          2      11%
青少年 (13-18)    4          1          5      26%  ⭐⭐⭐
青年 (19-35)      6          1          7      37%  ⭐⭐⭐
中年 (36-50)      3          0          3      16%
老年 (51+)        1          0          1      5%
────────────────────────────────────────────────
总计             15          4         19     100%

旁白比例：4/19 = 21% ✅
选择比例：15/19 = 79% ✅
核心年龄段（13-35岁）：12次，占 63% ✅
```

---

## 🔧 配置文件更新需求

### 需要在 config.js 中添加

```javascript
// ========== 事件分布配置 ==========

eventDistribution: {
  // 每个年龄段的目标事件数（用于验证数据完整性）
  targetEventCount: {
    baby: { narrative: 5, choice: 3 },
    child: { narrative: 5, choice: 8 },
    teen: { narrative: 8, choice: 20 },
    young: { narrative: 12, choice: 40 },
    middle: { narrative: 8, choice: 20 },
    elder: { narrative: 5, choice: 8 }
  },

  // 内容分类权重（按年龄段）
  categoryWeightByAge: {
    teen: {
      love: 2.0,      // 恋爱类事件权重 × 2
      school: 1.5,    // 校园类事件权重 × 1.5
      career: 0.3     // 职场类事件权重 × 0.3（几乎不出现）
    },
    young: {
      love: 1.3,
      career: 1.8,    // 职场类事件权重 × 1.8
      money: 1.5,     // 暴富类事件权重 × 1.5
      friendship: 1.0
    },
    middle: {
      family: 1.8,    // 家庭类事件权重 × 1.8
      career: 1.3,
      money: 1.2
    }
  },

  // 事件去重窗口大小
  deduplication: {
    choiceEvents: 5,      // 选择事件去重窗口
    narrativeEvents: 7    // 旁白事件去重窗口
  }
}
```

---

## 🎮 实施优先级

### 阶段1：MVP版本（立即实施）

**目标**：快速验证核心玩法

**事件数量**：
- 旁白事件：20-30 个（每年龄段3-5个）
- 选择事件：40-60 个（重点：teen/young）
- **总计**：60-90 个事件

**重点内容**：
- 青少年期：初恋、校园
- 青年期：恋爱、职场、暴富

### 阶段2：内容扩展（测试后迭代）

**目标**：丰富游戏内容，增加重玩性

**事件数量**：
- 旁白事件：50-80 个
- 选择事件：150-200 个
- **总计**：200-280 个事件

**扩展方向**：
- 增加每个分类的事件多样性
- 添加更多黑色幽默和荒诞死法
- 增加反转事件的趣味性

### 阶段3：优化和平衡（数据驱动）

**目标**：根据真实用户数据优化

**优化方向**：
- 调整事件权重（基于用户停留时间）
- 调整概率（基于用户死亡率）
- 增加高传播性事件（基于分享率）

---

## 📌 关键设计决策记录

### 决策1：旁白概率调整为 20%
- **原因**：用户反馈希望 4次旁白 / 20次选择
- **结果**：调整各年龄段概率，平均达到 20%

### 决策2：70%内容集中在13-35岁
- **原因**：对应抖音核心用户18-35岁
- **结果**：青少年期5个问题 + 青年期7个问题 = 12个问题，占 63%

### 决策3：年龄跳跃规则保持不变
- **原因**：跳跃过大 = 玩家运气不好，体现"人生无常"
- **结果**：不对跳跃规则做额外限制

### 决策4：高吸引力内容占 60-70%
- **原因**：吸引和留住玩家
- **结果**：恋爱/职场/暴富类事件权重更高

---

## 🔄 版本历史

- **v1.0** (2025-11-15) - 初始设计
  - 定义年龄段事件数量分配
  - 确定事件内容分布策略（60-70%高吸引力）
  - 调整旁白事件概率（20%）
  - 定义事件权重计算规则
  - 制定事件数据需求清单（MVP: 60-90个，完整版: 200-280个）
  - 确定事件去重策略

---

## 📝 待解决问题

1. **属性系统的影响程度** - 是否需要属性影响事件权重？
2. **连续死亡保护机制** - 是否需要"新手保护"？
3. **事件池耗尽处理** - 如果符合条件的事件都被去重了怎么办？

---

## 📚 相关文档

- `docs/framework/event.md` - 事件系统框架设计
- `docs/framework/randomness.md` - 随机系统框架设计
- `docs/design.md` - 游戏设计文档（用户画像、数据研究）
- `src/config.js` - 游戏配置文件
